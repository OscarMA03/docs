---
title: 'SMS Conversation'
openapi: 'POST /sms-conversation'
---

## SMS Conversation

Sends a message and generates an AI response. The content field contains the current message along with previous conversation context in string format.

### Authentication

<ParamField path="header" type="string" name="X-API-Key" required>
  API key for authentication
</ParamField>

### Request Body

<ParamField path="body" type="object" name="conversationData" required>
  SMS conversation data
</ParamField>

<ParamField path="body" type="string" name="chat_agent_id" required>
  Chat agent identifier
</ParamField>

<ParamField path="body" type="string" name="bp_chat_id" required>
  Builder Prime chat identifier
</ParamField>

<ParamField path="body" type="string" name="content" required>
  Current message content along with previous conversation context in string format
</ParamField>

### Example Request

```bash
POST /sms-conversation
Content-Type: application/json
X-API-Key: your_api_key_here

{
  "chat_agent_id": "1",
  "bp_chat_id": "4",
  "content": "Customer: Hello, I'd like to schedule an appointment\nCompany: Hi! I'd be happy to help you schedule an appointment. What service are you interested in?\nCustomer: I need a consultation for my business\nCustomer: no"
}
```

### Example Response

```json
{
  "success": true,
  "data": {
    "retell_chat_id": "chat_bd9173ad49a2ca7b44aad0a03f4",
    "bp_chat_id": "4",
    "found": true,
    "completion": {
      "messages": [
        {
          "message_id": "message_6af90f699587b580cacf82e9",
          "role": "agent",
          "created_timestamp": 1761781923966,
          "content": "Thanks so much for calling, Oscar. We look forward to seeing you for your consultation. Have a great day!"
        }
      ]
    }
  },
  "error": null
}
```

### Response Fields

<ParamField path="response" type="boolean" name="success">
  Indicates if the request was successful
</ParamField>

<ParamField path="response" type="object" name="data">
  Response data object
</ParamField>

<ParamField path="response" type="string" name="data.retell_chat_id">
  Retell chat identifier
</ParamField>

<ParamField path="response" type="string" name="data.bp_chat_id">
  Builder Prime chat identifier
</ParamField>

<ParamField path="response" type="boolean" name="data.found">
  Indicates if the chat conversation was found
</ParamField>

<ParamField path="response" type="object" name="data.completion">
  Completion object containing AI-generated messages
</ParamField>

<ParamField path="response" type="array" name="data.completion.messages">
  Array of message objects from the AI agent
</ParamField>

<ParamField path="response" type="string" name="data.completion.messages[].message_id">
  Unique identifier for the message
</ParamField>

<ParamField path="response" type="string" name="data.completion.messages[].role">
  Role of the message sender (e.g., "agent")
</ParamField>

<ParamField path="response" type="integer" name="data.completion.messages[].created_timestamp">
  Unix timestamp when the message was created
</ParamField>

<ParamField path="response" type="string" name="data.completion.messages[].content">
  The AI-generated message content
</ParamField>

### Error Response

```json
{
  "success": false,
  "data": null,
  "error": "Failed to generate AI response"
}
```

### Use Cases

- **AI-Powered Customer Service**: Generate context-aware AI responses based on conversation history
- **Conversation Continuity**: Maintain natural conversation flow with AI assistance
- **Lead Qualification**: AI can analyze conversation history and ask qualifying questions
- **Real-time Support**: Provide instant, context-aware responses to customer inquiries

### Implementation Notes

- The endpoint generates AI responses based on the provided content
- Content should contain both previous conversation messages and the current message in a readable string format
- Messages should be ordered chronologically (oldest first, with the most recent message at the end)
- Consider implementing rate limiting for AI response generation
