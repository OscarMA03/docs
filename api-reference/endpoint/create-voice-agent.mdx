---
title: 'Create Voice Agent'
openapi: 'POST /create-voice-agent'
---

## Create Voice Agent

Create a Retell LLM and Voice Agent with configuration

### Headers

<ParamField path="header" type="string" name="x-builder-prime-api-key" required>
  Builder Prime API key for authentication
</ParamField>

<ParamField path="header" type="string" name="Content-Type" required>
  application/json
</ParamField>

### Request Body

<ParamField path="body" type="string" name="class_id" required>
  Class identifier
</ParamField>

<ParamField path="body" type="string" name="company_id">
  Company identifier
</ParamField>

<ParamField path="body" type="string" name="start_speaker">
  Starting speaker for the conversation (e.g., "agent")
</ParamField>

<ParamField path="body" type="object" name="configuration" required>
  Company configuration object
</ParamField>

<ParamField path="body.configuration" type="string" name="company_url_append">
  Company's URL append value (e.g., "stage", "prod")
</ParamField>

<ParamField path="body.configuration" type="string" name="company_name">
  Official business name
</ParamField>

<ParamField path="body.configuration" type="string" name="company_number">
  Callback number for follow-ups
</ParamField>

<ParamField path="body.configuration" type="string" name="service_label_type">
  What to call the appointment (e.g., "In Home Consultation")
</ParamField>

<ParamField path="body.configuration" type="string" name="ai_disclosure">
  Whether agent announces it's AI (e.g., "true")
</ParamField>

<ParamField path="body.configuration" type="string" name="business_hours">
  When to offer appointments
</ParamField>

<ParamField path="body.configuration" type="string" name="callback">
  Create task to callback at later time
</ParamField>

<ParamField path="body.configuration" type="string" name="custom_greeting">
  Custom greeting text
</ParamField>

<ParamField path="body.configuration" type="string" name="agent_name">
  Agent name (e.g., "Sally")
</ParamField>

<ParamField path="body.configuration" type="string" name="services_supported">
  Comma-separated list of services included (e.g., "windows, doors, replacements")
</ParamField>

<ParamField path="body.configuration" type="string" name="services_not_included">
  Comma-separated list of services excluded (e.g., "repairs, roofs")
</ParamField>

<ParamField path="body" type="object" name="knowledgeBase">
  Knowledge base configuration
</ParamField>

<ParamField path="body.knowledgeBase" type="string" name="name">
  Name of the knowledge base
</ParamField>

<ParamField path="body.knowledgeBase" type="array" name="urls">
  Array of URLs to add to the knowledge base
</ParamField>

<ParamField path="body.knowledgeBase" type="array" name="knowledge_base_files">
  Array of file objects to add to the knowledge base
</ParamField>

<ParamField path="body.knowledgeBase" type="array" name="knowledge_base_texts">
  Array of text objects with text and title
</ParamField>

<ParamField path="body.knowledgeBase.knowledge_base_texts" type="string" name="text" required>
  The text content to add
</ParamField>

<ParamField path="body.knowledgeBase.knowledge_base_texts" type="string" name="title" required>
  Title for the text content
</ParamField>

<ParamField path="body" type="object" name="service_areas">
  Service areas configuration
</ParamField>

<ParamField path="body.service_areas" type="array" name="zipcodes">
  Array of ZIP codes for service areas
</ParamField>

<ParamField path="body.service_areas" type="string" name="county">
  County name
</ParamField>

<ParamField path="body.service_areas" type="string" name="state">
  State abbreviation or name
</ParamField>

### Example Request

```bash
curl --request POST \
  --url 'https://proxy-server-builder-prime.onrender.com/create-voice-agent' \
  --header 'Content-Type: application/json' \
  --header 'x-builder-prime-api-key: <your-builder-prime-api-key>' \
  --data '{
  "class_id": "50233",
  "company_id": "612313",
  "start_speaker": "agent",
  "configuration": {
    "company_url_append": "stage",
    "company_name": "The Men with Tools",
    "company_number": "+1234567890",
    "service_label_type": "In Home Consultation",
    "ai_disclosure": "true",
    "business_hours": "Monday 9am-5pm, Friday 9am-5pm",
    "callback": "callback_task",
    "custom_greeting": "Hi, thanks for calling the Men with Tools",
    "agent_name": "Sally",
    "services_supported": "windows, doors, replacements",
    "services_not_included": "repairs, roofs"
  },
  "knowledgeBase": {
    "name": "Voice Agent KB",
    "urls": [
      "https://www.retellai.com"
    ]
  },
  "service_areas": {
    "zipcodes": ["90210", "90211", "90212", "10001", "10002"],
    "county": "Los Angeles",
    "state": "CA"
  }
}'
```

### Example Response

```json
{
  "success": true,
  "data": {
    "voice_agent_llm_id": "llm_abc123xyz",
    "voice_agent_id": "4"
  },
  "error": null
}
```

### Error Response

```json
{
  "success": false,
  "data": null,
  "error": "Invalid class ID or authentication failed"
}
```

### Response Fields

<ParamField path="response" type="boolean" name="success">
  Indicates if the request was successful
</ParamField>

<ParamField path="response" type="object" name="data">
  Response data object
</ParamField>

<ParamField path="response" type="string" name="data.voice_agent_llm_id">
  Retell LLM identifier for the created voice agent
</ParamField>

<ParamField path="response" type="string" name="data.voice_agent_id">
  Voice agent identifier
</ParamField>

### Use Cases

- **Agent Creation**: Create a new voice agent with company-specific configuration
- **Initial Setup**: Set up a new voice agent for first-time deployment
- **AI Agent Initialization**: Configure voice agent with company-specific settings
- **Business Rules**: Set up appointment types, business hours, and service areas for the agent
- **Knowledge Base Integration**: Upload knowledge base files and URLs for AI context

### Implementation Notes

- Creates a new voice agent and returns the `voice_agent_llm_id` and `voice_agent_id`
- Configuration data is used to initialize the Retell LLM with company-specific settings
- Consider implementing validation for required fields before creating the agent
- For file uploads, use multipart/form-data encoding when sending `knowledgeBaseFiles`
- Knowledge base files should be processed and indexed for AI context
- The returned `voice_agent_llm_id` can be used to retrieve agent configuration via the GET endpoint
- The returned `voice_agent_id` is used to identify the agent in subsequent requests

